<view class="page-body">
  <view class="page-section tc">
    <view class="goods-list">
      <view class="live-title"  bindtap="focus_liveroom">
        <image src="{{live_logo}}" mode="aspectFit" />
        <view class="live-title-text">
          <text class="live-title-name">{{live_name}}</text>
          <text style="color:#e34c55;font-size:20rpx;">{{live_sub_name}}</text>
        </view>
        <button style="{{live_focus_status?'background-color:#1d1d1d;color:#f2f2f2':''}}">关注</button>
      </view>   
      <label bindtap="live_member_info"> 
        <view class="live-member-image"> 
          <block wx:for="{{live_headimg}}" wx:for-item="headiimg" wx:for-index="headiimgIndex" wx:key="headiimgIndex">
            <image src="{{headiimg}}" style="{{headiimgIndex>0?'margin-left:-'+40*headiimgIndex+'rpx;':''}}" mode="aspectFit" />
          </block>
        </view>
        <text   class="live-on">{{live_members>0?live_members:''}}</text>
      </label>
    </view>
    <video id="myVideo" class="slide-image" style="height:{{dkheight}}px;" src="{{videourl}}" controls poster="{{poster_image}}" custom-cache="{{false}}" autoplay="{{true}}" objectFit="fill" bindplay="bindPlay" binderror="playerror" bindwaiting="playwaiting" vslide-gesture="true">
      <barrage class="barrage"></barrage>
    </video>
  </view>
</view>

<view class="footer">
  <view class="footer-left" hidden="">
    <view class="footer-button" bindtap="goodsinfo"> 
      <image class="goods-button" src="/images/1.png" ></image>
      <text class="goods-num">{{goods_num}}</text>
	  </view>
    <view class="footer-button" bindtap="sendDanmu"> 
      <view class="danmu-list">
        <view class="danmu-button" ></view>
        <image class="danmu-button-image" src="/images/u72.png" ></image>
      </view>
	  </view>
  </view>
  <view class="footer-right" style="">
    <view class="footer-button" bindtap="onShareAppMessage"> 
      <view class="share-list">
        <button  class="share-button" open-type='share' formType="submit" bindtap="onShareAppMessage"></button>
        <image class="share-button-image" src="/images/share.png" ></image>
      </view>
	  </view>
     <view class="footer-button" bindtap="prize_liveroom"> 
      <view class="prize-list">
        <view class="prize-button" ></view>
        <image class="prize-button-image" src="/images/u8.png" ></image>
      </view>
	  </view>
  </view>
</view>

<view hidden="{{errorhidden}}" style='z-index:999;'>
  <modal title="播放错误" hidden="{{errorhidden}}" bindconfirm="errorConfirmPlay" bindcancel="errorCancelPlay" confirm-text="重试" cancel-text="退出">
    <view style="height:{{dkheight-520}}px;">
      <view class="note">
        <text style='margin-top:10rpx;font-size:26rpx;color:#333;'>{{error_message}}</text>
      </view>
    </view>
  </modal>
</view>
<action-sheet hidden="{{modalMemberHidden}}" bindchange="modalMemberconfirm">
  <view class='modalMemberitle'>
    <text>{{live_members>0?'在线人数:'+live_members:''}}</text>
    <view class='member-return' bindtap="modalMemberconfirm">×</view>
  </view> 
  <scroll-view class="member-container" style="height:{{dkheight-300}}px" scroll-y bindscroll="member_scrolltoupper" scroll-top="{{member_scrollTop}}" bindscrolltolower="getMoreMemberTapTag"  >
    <block wx:for="{{live_memberList}}"  wx:key="id" wx:for-item="member" wx:for-index="memberIndex">
    <view class="member-item" bindtap="showMember"  data-m_id="{{member.m_id}}" data-nickname="{{member.nickname}}" data-wx_headimg="{{member.wx_headimg}}" >
      <view>
        <!-- 缩略图 -->
        <image class="member-image" src="{{member.wx_headimg}}" mode="aspectFit" />
      </view>
      <text class="member-title">{{member.wx_nickname}}</text>
    </view>
    </block>
  </scroll-view>  
</action-sheet>
<action-sheet hidden="{{modalGoodsHidden}}" bindchange="modalGoodsconfirm" style="border-radius:20rpx;" tops="40%">
  <view class='modalGoodsTitle'>
    <text>{{goods_num>0?'商品数:'+goods_num:''}}</text>
    <view class='goods-return' bindtap="modalGoodsconfirm">×</view>
  </view> 
  <scroll-view class="goods-container" style="height:{{dkheight-300}}px" scroll-y bindscroll="goods_scrolltoupper" scroll-top="{{goods_scrollTop}}" bindscrolltolower="getMoreGoodsTapTag"  >
    <block wx:for="{{venuesItems}}" wx:key="id" wx:for-item="goods" wx:for-index="goodsIndex" >
    <view class="goods-item" bindtap="showGoods"  data-goods-id="{{goods.id}}" data-goods-name="{{goods.name}}" data-goods-org="{{goods.goods_org}}" data-goods-shape="{{goods.shape}}" data-goods-info="{{goods.act_info}}"
        data-goods-price="{{goods.sell_price}}" data-sale="{{goods.sale}}" data-image="{{goods.activity_image?goods.activity_image:goods.image}}">
       <view>
        <view class='goods-no'>{{goods.goodsno}}</view>
        <!-- 缩略图 -->
        <image class="goods-image" src="{{goods.activity_image?goods.activity_image:goods.image}}" mode="aspectFit" />
      </view>
       <view class="goods-text">
        <text class="goods-title">{{goods.name}}</text>
        <view class="goods-footer">
          <view style="width:70%">
            <text style="color:#e34c55;">￥{{goods.sell_price}}</text>
          </view>
          <view style="width:30%; text-align:right;">
            <text class="smallbtn2">去下单</text>
          </view>
        </view>
      </view>
    </view>
    </block>
  </scroll-view>  
</action-sheet>
<action-sheet hidden="{{tanmuHidden}}" bindchange="modalMessageconfirm">
  <view class='modalMessageTitle' bindtap="modalMessageconfirm">
    <view class='message-return' >×</view>
  </view> 
  <view class="sendmessage">
    <view class="text">   
      <input value="{{inputValue}}" placeholder="说点什么" bindblur='bindInputBlur' />
      <button bindtap="bindSendDanmu">发布</button>
    </view>
  </view>
</action-sheet>
<view class="danmu-info">
  <scroll-view hidden="{{modalDanmuHidden}}" class="danmu-scroll" style="height:{{dkheight-400}}px" scroll-y bindscroll="danmn_scrolltoupper" scroll-top="{{danmu_scrollTop}}" bindscrolltolower="queryDanmu"  > 
  <view class="danmu-scroll-list">
    <block wx:for="{{danmuList}}" wx:key="id" wx:for-item="danmu" wx:for-index="danmuIndex" wx:key="id">
    <view class="danmu-content" style="{{danmu.color?'color:'+danmu.color+';':''}}">
      <view style="display:flex;flex-direction:row;justify-content:flex-start;">
        <text class="danmu-content-nickname" style="{{danmu.background_color?'background_color:'+danmu.background_color+';':''}}">{{danmu.nickname}}</text>
        <text class="danmu-content-text" style="{{danmu.background_color?'background_color:'+danmu.background_color+';':''}}">{{danmu.content}}</text>
      </view>
    </view>
    </block>
  </view>
  </scroll-view>  
  <image hidden="{{modalDanmuHidden}}"bindtap="danmuInfo" style="margin-left:30rpx;width:30rpx;height:30rpx;" src="/images/top.png"></image> 
  <text hidden="{{!modalDanmuHidden}}" bindtap="danmuInfo" class="danmu-num-show">{{danmu_num<100?' '+danmu_num+' 条新的消息':' 99+条新的消息'}}</text>  
</view>
